<div class="background-container">
    <!-- Search Bar -->
    <search-bar></search-bar>

    <div class="container">

        <!-- Lists -->
        <div *ngIf="!share" class="lists-container">
            <h2>
                Your Lists
            </h2>

            <!-- Each list -->
            <div *ngFor="let list of lists" class="list">
                <div [ngClass]="{'selected-list': list.selected, 'list-title': !list.selected}">
                    {{list.title}}
                </div>
                <div *ngIf="list.ownerName" class="owner">
                    Owner: {{list.ownerName}}
                </div>
                <div class="description">
                    {{list.description}}
                </div>
                <div class="total-items">
                    {{list.totalItems + ' item' + (list.totalItems > 1 ? 's' : '')}}
                </div>
            </div>


            <!-- Create list button -->
            <div class="purple-button" style="margin-top: 20px;">
                Create a List
            </div>
        </div>

        <div style="flex: 1; margin-left: 20px;">

            <!-- Heading -->
            <div class="gray" *ngIf="ownerName">{{ownerName}}'s list</div>
            <div class="heading-container">
                <div class="main-title">{{listTitle}}</div>
                <div class="links-sort-container">

                    <!-- Sort -->
                    <select class="dark" [(ngModel)]="selectedSortOption" (change)="setSort()">
                        <option *ngFor="let sortOption of sortOptions" [ngValue]="sortOption">Sort by
                            {{sortOption.name}}
                        </option>
                    </select>

                    <!-- Manage & share list -->
                    <div *ngIf="!share">
                        <div class="link" style="right: 0;" (click)="modalService.shareList.show = true">Share List
                        </div>
                        <div class="link" (click)="modalService.manageList.show = true">Manage List</div>
                    </div>

                </div>
            </div>



            <!-- Products -->
            <div *ngFor="let product of products" class="product-container">

                <div style="display: flex; ">
                    <!-- Image -->
                    <div class="image-background" (click)="onItemClick(product.urlTitle)">
                        <div class="img" [style.background-image]="'url(/Images/' + product.image + ')'"></div>
                    </div>


                    <div class="product-info">
                        <!-- Title -->
                        <div class="product-title">
                            {{product.title}}
                        </div>

                        <!-- Rating & Reviews -->
                        <div *ngIf="product.rating > 0" class="rating-container">
                            <stars [rating]="product.rating"></stars>
                            <span class="reviews-text">
                                {{product.totalReviews | number}} reviews
                            </span>
                        </div>
                        <div *ngIf="product.rating == 0" class="first-review-link">
                            Be the first to review this item
                        </div>

                        <!-- Price -->
                        <div class="price">
                            <div *ngIf="product.maxPrice === 0">
                                {{product.minPrice | currency:'USD'}}
                            </div>
                            <div *ngIf="product.maxPrice > 0">
                                {{product.minPrice | currency:'USD'}} -
                                {{product.maxPrice | currency:'USD'}}
                            </div>
                        </div>
                    </div>

                    <div class="buttons-container">
                        <div class="gray">
                            Item added {{product.dateAdded}}
                        </div>
                        <button class="gold-button" style="margin-top: 10px;"
                            (click)="onPublisherButtonClick(product)">Visit Publisherâ€™s Page To Buy</button>
                        <div *ngIf="owner" style="margin-top: 10px; display: flex">
                            <button class="gray-button" style="flex: 1; margin-right: 10px;">Move</button>
                            <button class="gray-button" style="flex: 1">Delete</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer -->
    <footer></footer>

</div>
<share-list *ngIf="modalService.shareList.show" (onShareClick)="onShareClick($event)"></share-list>
<manage-list *ngIf="modalService.manageList.show"></manage-list>
<input id="copy" type="text" *ngIf="modalService.shareList.show">